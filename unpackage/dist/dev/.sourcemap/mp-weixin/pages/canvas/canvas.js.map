{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Administrator/Desktop/Text/vue/uni-app-tabbar/pages/canvas/canvas.vue?c588","webpack:///C:/Users/Administrator/Desktop/Text/vue/uni-app-tabbar/pages/canvas/canvas.vue?eb98","webpack:///C:/Users/Administrator/Desktop/Text/vue/uni-app-tabbar/pages/canvas/canvas.vue?e679","webpack:///C:/Users/Administrator/Desktop/Text/vue/uni-app-tabbar/pages/canvas/canvas.vue?17b2","uni-app:///pages/canvas/canvas.vue","webpack:///C:/Users/Administrator/Desktop/Text/vue/uni-app-tabbar/pages/canvas/canvas.vue?4711","webpack:///C:/Users/Administrator/Desktop/Text/vue/uni-app-tabbar/pages/canvas/canvas.vue?cc10"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,+F;AACAA,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;AACc;;;AAGnE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAgmB,CAAgB,0nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;ACapnB,Q;AACA;AACA,MADA,kBACA;AACA;AACA,kBADA,EACA;AACA,kBAFA,EAEA;AACA;AACA,gHAJA;AAKA;AACA,8EANA;AAOA,kBAPA;AAQA,mBARA;AASA,0BATA;AAUA,qBAVA;AAWA,wBAXA;AAYA,wBAZA;AAaA;AACA,iBAdA;AAeA,gBAfA;;AAiBA,GAnBA;AAoBA,QApBA,oBAoBA;AACA;AACA;AACA;AACA,aADA,mBACA,GADA,EACA;AACA;AACA;AACA;AACA,OALA;;AAOA;AACA;AACA,GAhCA;AAiCA;AACA,UADA,oBACA;AACA;AACA;AACA,uBADA;AAEA,uBAFA;;AAIA;AACA;AACA;AACA;AACA,OAFA,EAEA,IAFA;AAGA,KAZA;AAaA,SAbA,mBAaA;AACA;AACA,mCADA;AAEA,iCAFA;AAGA,4BAHA;;AAKA,oBANA,GAMA,KANA;AAOA,qBAPA,GAOA,aAPA,EAOA;AACA,sBARA,GAQA,YARA,EAQA;;AAEA;AACA,mBAXA,GAWA,mCAXA;AAYA;AACA;AAbA,yCAcA,iCAdA,QAcA,GAdA;AAeA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBADA,EACA,QADA,EAlDA;AAoDA,oDApDA,UAoDA,IApDA;AAqDA;AACA,mBADA,EACA,SADA;AAEA;AACA;AACA,wBADA,EACA,KADA,IACA,CADA,EACA,SADA;AAEA;AACA;AACA;AACA;AACA;AACA,iCA/DA;AAgEA,KA7EA;AA8EA;AACA,aA/EA,qBA+EA,GA/EA,EA+EA,GA/EA,EA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAvBA,CAuBA;AACA,mBAxBA,CAwBA;AACA;AACA;AACA,KA1GA;AA2GA;AACA,gBA5GA,wBA4GA,GA5GA,EA4GA,GA5GA,EA4GA,CA5GA,EA4GA,CA5GA,EA4GA,KA5GA,EA4GA,MA5GA,EA4GA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA5HA;AA6HA;AACA,aA9HA,qBA8HA,GA9HA,EA8HA,CA9HA,EA8HA,CA9HA,EA8HA,CA9HA,EA8HA,CA9HA,EA8HA,CA9HA,EA8HA,IA9HA,EA8HA,SA9HA,EA8HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAVA,CAUA;AACA;AACA;AACA,KA3IA;AA4IA;AACA,qBA7IA,6BA6IA,GA7IA,EA6IA,KA7IA,EA6IA,MA7IA,EA6IA,MA7IA,EA6IA,SA7IA,EA6IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA3LA;AA4LA;AACA,YA7LA,sBA6LA;AACA;AACA,yBADA;AAEA,uBAFA;AAGA,kBAHA;;;AAMA;AACA;;AAEA;AACA,YADA;AAEA,YAFA;AAGA,uCAHA;AAIA,wCAJA;AAKA,+CALA;AAMA,gDANA;AAOA,4BAPA;AAQA,eARA,mBAQA,GARA,EAQA;AACA;AACA;AACA;AACA;AACA,sCADA;AAEA,mBAFA,mBAEA,GAFA,EAEA;AACA;AACA;AACA,gCADA;;AAGA;AACA,aARA;AASA,gBATA,gBASA,IATA,EASA;AACA;AACA;AACA,oCADA;AAEA,yBAFA,mBAEA,EAFA,EAEA;AACA;AACA;AACA;AACA;AACA,mBAPA;;AASA;AACA,aArBA;;AAuBA,SAnCA;;;AAsCA,KA7OA,EAjCA,E;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAkmC,CAAgB,4kCAAG,EAAC,C;;;;;;;;;;;ACAtnC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/canvas/canvas.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/canvas/canvas.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./canvas.vue?vue&type=template&id=665e8a74&\"\nvar renderjs\nimport script from \"./canvas.vue?vue&type=script&lang=js&\"\nexport * from \"./canvas.vue?vue&type=script&lang=js&\"\nimport style0 from \"./canvas.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/canvas/canvas.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./canvas.vue?vue&type=template&id=665e8a74&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./canvas.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./canvas.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"can\">\r\n\t\t\t<canvas :style=\"{ 'margin-top':canvasH/10 + 'px',width: canvasW + 'px', height: canvasH + 'px'}\"\r\n\t\t\t\tcanvas-id=\"myCanvas\"></canvas>\r\n\t\t</view>\r\n\t\t<view class=\"botton\" v-show=\"show\">\r\n\t\t\t<button @click=\"preserve\">保存</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tvar rpx\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcanvasW: 690, // 画布宽\r\n\t\t\t\tcanvasH: 800, // 画布高\r\n\t\t\t\t// 头像\r\n\t\t\t\theadImg: 'https://dss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2994867177,1065982860&fm=26&gp=0.jpg',\r\n\t\t\t\t// 二维码图片\r\n\t\t\t\tewmImg: 'https://scpic.chinaz.net/Files/pic/pic9/202103/bpic22693_s.jpg',\r\n\t\t\t\tname: '超级无敌',\r\n\t\t\t\tbrief: '宇宙之心',\r\n\t\t\t\tphone: '13614725836',\r\n\t\t\t\tcompany: '行业公司',\r\n\t\t\t\tsite: '长沙市雨花区岳麓书院',\r\n\t\t\t\tstr: '长按识别二维码，加好友',\r\n\t\t\t\t//是否显示按钮\r\n\t\t\t\tshow: false,\r\n\t\t\t\timgsrc: '',\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t// 获取设备信息，主要获取宽高\r\n\t\t\tlet that = this\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\trpx = res.windowWidth / 750;\r\n\t\t\t\t\tthat.canvasW = that.canvasW * rpx\r\n\t\t\t\t\tthat.canvasH = that.canvasH * rpx\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// 请求海报数据\r\n\t\t\tthis.canvas()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tcanvas() {\r\n\t\t\t\tlet that = this\r\n\t\t\t\tthis.$operate.toast({\r\n\t\t\t\t\ttitle: '加载中...',\r\n\t\t\t\t\ticon: 'loading',\r\n\t\t\t\t})\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t\t//定时器，等页面渲染完成\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tthat.drawa()\r\n\t\t\t\t}, 2000);\r\n\t\t\t},\r\n\t\t\tasync drawa() {\r\n\t\t\t\tthis.$operate.toast({\r\n\t\t\t\t\ttitle: '名片生成中...',\r\n\t\t\t\t\ticon: 'loading',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\tlet that = this\r\n\t\t\t\tlet image = this.headImg; //图片地址\r\n\t\t\t\tlet qrcode = this.ewmImg; //小程序码址址\r\n\r\n\t\t\t\t// 初始化canvas画布\r\n\t\t\t\tconst ctx = uni.createCanvasContext('myCanvas')\r\n\t\t\t\tthis.roundRect(ctx, 0, 0, that.canvasW, that.canvasH, 10, '#ffffff', 'all')\r\n\t\t\t\t// 获取图片绘制\r\n\t\t\t\tlet res = await that.$operate.getImageInfo(image);\r\n\t\t\t\t//设置圆形图片\r\n\t\t\t\t// this.drawCircular(ctx, res.path, 40 * rpx, 24 * rpx, 120 * rpx, 120 * rpx)\r\n\r\n\t\t\t\t//绘制文字\r\n\t\t\t\t//文字颜色：默认黑色\r\n\t\t\t\tctx.setFillStyle('#333333')\r\n\t\t\t\t//设置字体大小，默认10\r\n\t\t\t\tctx.setFontSize(25)\r\n\t\t\t\t// 设置位置\r\n\t\t\t\tctx.textAlign = 'left'\r\n\t\t\t\t// 字体样式\r\n\t\t\t\tctx.font = 'normal 12px sans-serif'\r\n\t\t\t\t// 文字内容 , 宽度, 高度\r\n\t\t\t\tctx.fillText(that.name, 40 * rpx, 60 * rpx)\r\n\r\n\t\t\t\tctx.setFillStyle('#AAAAAA')\r\n\t\t\t\t//设置字体大小，默认10\r\n\t\t\t\tctx.setFontSize(15)\r\n\t\t\t\tctx.fillText(that.brief, 40 * rpx, 120 * rpx)\r\n\r\n\t\t\t\tctx.setFillStyle('#999999')\r\n\t\t\t\t//设置字体大小，默认10\r\n\t\t\t\tctx.setFontSize(12)\r\n\t\t\t\tctx.fillText(that.phone, 40 * rpx, 250 * rpx)\r\n\t\t\t\tctx.fillText(that.company, 40 * rpx, 300 * rpx)\r\n\t\t\t\tctx.fillText(that.site, 40 * rpx, 350 * rpx)\r\n\r\n\r\n\t\t\t\t// this.drawCircular(ctx, res.path, 250 * rpx, 54 * rpx, 120 * rpx, 120 * rpx)\r\n\t\t\t\t//狐形\r\n\t\t\t\t// h5 上面头像设置完全失效 建议小程序运行\r\n\t\t\t\tthis.arcShaped(ctx, res.path)\r\n\r\n\t\t\t\t//个人信息背景\r\n\t\t\t\t//绘制图形\r\n\t\t\t\tthat.roundRect(ctx, 0, 380 * rpx, 690 * rpx, 420 * rpx, 10,\r\n\t\t\t\t\t'#f7f7f7', 'bottom')\r\n\t\t\t\tlet ress = await that.$operate.getImageInfo(qrcode);\r\n\t\t\t\tctx.drawImage(ress.path, 200 * rpx, 420 * rpx, 290 *\r\n\t\t\t\t\trpx, 290 * rpx)\r\n\t\t\t\t//提示文字\r\n\t\t\t\tctx.fillText(that.str, (that.canvasW - ctx.measureText(\r\n\t\t\t\t\tthat.str).width) / 2, 750 * rpx)\r\n\t\t\t\t// 执行绘制方法\r\n\t\t\t\tctx.draw()\r\n\t\t\t\t//隐藏加载\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\t// 显示保存按钮\r\n\t\t\t\tthat.show = true\r\n\t\t\t},\r\n\t\t\t//狐形\r\n\t\t\tarcShaped(ctx, url) {\r\n\t\t\t\tctx.save();\r\n\t\t\t\t//开始一个新的绘制路径\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\t//设置路径起点坐标\r\n\t\t\t\t//左上\r\n\t\t\t\tctx.moveTo(520 * rpx, 0 * rpx)\r\n\t\t\t\t//右上\r\n\t\t\t\tctx.lineTo(670 * rpx, 0 * rpx);\r\n\t\t\t\t//右圆角\r\n\t\t\t\tctx.arc(690 * rpx - 20 * rpx, 20 * rpx, 20 * rpx, Math.PI * 3 / 2, Math.PI * 2);\r\n\t\t\t\t//右下\r\n\t\t\t\tctx.lineTo(690 * rpx, 377 * rpx);\r\n\t\t\t\t//左下\r\n\t\t\t\t//左下角圆弧，弧度从1/2PI到PI\r\n\t\t\t\tctx.arc(550 * rpx, 377 * rpx - 180 * rpx, 180 * rpx, Math.PI / 2, Math.PI);\r\n\t\t\t\t// ctx.lineTo(580 * rpx, 375 * rpx);\r\n\t\t\t\t//左上角圆弧，弧度从PI到3/2PI\r\n\t\t\t\tctx.arc(550 * rpx, 180 * rpx, 180 * rpx, Math.PI, Math.PI * 3 / 2);\r\n\t\t\t\t//先关闭绘制路径。注意，此时将会使用直线连接当前端点和起始端点。\r\n\t\t\t\tctx.closePath();\r\n\t\t\t\tctx.clip();\r\n\t\t\t\t//边框颜色\r\n\t\t\t\tctx.strokeStyle = \"#FFFFFF\"; //填充边框颜色\r\n\t\t\t\tctx.stroke(); //画线轮廓\r\n\t\t\t\tctx.drawImage(url, 120 * rpx, 0 * rpx, 620 * rpx, 391 * rpx);\r\n\t\t\t\tctx.restore();\r\n\t\t\t},\r\n\t\t\t//画圆形头像\r\n\t\t\tdrawCircular(ctx, url, x, y, width, height) {\r\n\t\t\t\t// ctx为画布对象，url为图片地址，x为画布x轴位置，y为画布y轴位置，width为图像宽度，height为图像高度。\r\n\t\t\t\tlet radius, diameter\r\n\t\t\t\t//以最短的边为半径绘制圆\r\n\t\t\t\tif (width > height) {\r\n\t\t\t\t\tradius = height / 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tradius = width / 2;\r\n\t\t\t\t}\r\n\t\t\t\tdiameter = radius * 2;\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.arc(x + radius, y + radius, radius, 0, Math.PI * 2, false);\r\n\t\t\t\tctx.clip();\r\n\t\t\t\tctx.drawImage(url, x, y, diameter, diameter);\r\n\t\t\t\tctx.restore();\r\n\t\t\t},\r\n\t\t\t// 圆角矩形\r\n\t\t\troundRect(ctx, x, y, w, h, r, colo, direction) {\r\n\t\t\t\t//圆的直径必然要小于矩形的宽高          \r\n\t\t\t\tif (2 * r > w || 2 * r > h) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.translate(x, y);\r\n\t\t\t\t//绘制圆角矩形的各个边  \r\n\t\t\t\tthis.drawRoundRectPath(ctx, w, h, r, direction);\r\n\r\n\t\t\t\tctx.fillStyle = colo || \"#000\"; //若是给定了值就用给定的值否则给予默认值  \r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.restore();\r\n\t\t\t},\r\n\t\t\t// 生成圆角\r\n\t\t\tdrawRoundRectPath(ctx, width, height, radius, direction) {\r\n\t\t\t\tctx.beginPath(0);\r\n\t\t\t\tif (direction == 'all') {\r\n\t\t\t\t\t//从右下角顺时针绘制，弧度从0到1/2PI\r\n\t\t\t\t\tctx.arc(width - radius, height - radius, radius, 0, Math.PI / 2);\r\n\t\t\t\t\t//矩形下边线  \r\n\t\t\t\t\tctx.lineTo(radius, height);\r\n\t\t\t\t\t//左下角圆弧，弧度从1/2PI到PI  \r\n\t\t\t\t\tctx.arc(radius, height - radius, radius, Math.PI / 2, Math.PI);\r\n\t\t\t\t\t//矩形左边线  \r\n\t\t\t\t\tctx.lineTo(0, radius);\r\n\t\t\t\t\t//左上角圆弧，弧度从PI到3/2PI\r\n\t\t\t\t\tctx.arc(radius, radius, radius, Math.PI, Math.PI * 3 / 2);\r\n\t\t\t\t\t//上边线  \r\n\t\t\t\t\tctx.lineTo(width - radius, 0);\r\n\t\t\t\t\t//右上角圆弧  \r\n\t\t\t\t\tctx.arc(width - radius, radius, radius, Math.PI * 3 / 2, Math.PI * 2);\r\n\t\t\t\t\tctx.lineTo(width, height - radius);\r\n\t\t\t\t}\r\n\t\t\t\tif (direction == 'bottom') { //上圆角\r\n\t\t\t\t\t//从右下角顺时针绘制，弧度从0到1/2PI\r\n\t\t\t\t\tctx.arc(width - radius, height - radius, radius, 0, Math.PI / 2);\r\n\t\t\t\t\t//矩形下边线  \r\n\t\t\t\t\tctx.lineTo(radius, height);\r\n\t\t\t\t\t//左下角圆弧，弧度从1/2PI到PI  \r\n\t\t\t\t\tctx.arc(radius, height - radius, radius, Math.PI / 2, Math.PI);\r\n\t\t\t\t\t//矩形左边线  \r\n\t\t\t\t\tctx.lineTo(0, 0);\r\n\t\t\t\t\t//上边线  \r\n\t\t\t\t\tctx.lineTo(width, 0);\r\n\r\n\t\t\t\t\tctx.lineTo(width, height);\r\n\t\t\t\t}\r\n\t\t\t\tif (direction == 'top') { //下圆角\r\n\t\t\t\t\tctx.lineTo(0, height);\r\n\t\t\t\t\t//左下角圆弧，弧度从1/2PI到PI  \r\n\t\t\t\t\tctx.lineTo(0, 0);\r\n\t\t\t\t\t//左上角圆弧，弧度从PI到3/2PI\r\n\t\t\t\t\tctx.arc(radius, radius, radius, Math.PI, Math.PI * 3 / 2);\r\n\t\t\t\t\t//上边线  \r\n\t\t\t\t\tctx.lineTo(width - radius, 0);\r\n\t\t\t\t\t//右上角圆弧  \r\n\t\t\t\t\tctx.arc(width - radius, radius, radius, Math.PI * 3 / 2, Math.PI * 2);\r\n\t\t\t\t\tctx.lineTo(width, height)\r\n\t\t\t\t}\r\n\t\t\t\tctx.closePath();\r\n\t\t\t},\r\n\t\t\t//保存\r\n\t\t\tpreserve() {\r\n\t\t\t\tthis.$operate.toast({\r\n\t\t\t\t\ttitle: '名片保存中...',\r\n\t\t\t\t\ticon: 'loading',\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\r\n\t\t\t\tlet tempRatio = 1.5;\r\n\t\t\t\tlet that = this\r\n\r\n\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: 0,\r\n\t\t\t\t\twidth: this.canvasW * tempRatio,\r\n\t\t\t\t\theight: this.canvasH * tempRatio,\r\n\t\t\t\t\tdestWidth: this.canvasW * tempRatio * 5,\r\n\t\t\t\t\tdestHeight: this.canvasH * tempRatio * 5,\r\n\t\t\t\t\tcanvasId: 'myCanvas',\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t// console.log(res);\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t// 保存图片到系统相册\r\n\t\t\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t// console.log(res);\r\n\t\t\t\t\t\t\t\tthat.$operate.toast({\r\n\t\t\t\t\t\t\t\t\ttitle: '成功保存到相册'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthat.imgsrc = res.tempFilePath\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail(ress) {\r\n\t\t\t\t\t\t\t\tif (ress.errMsg == \"saveImageToPhotosAlbum:fail auth deny\") {\r\n\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '授权图片保存到相册',\r\n\t\t\t\t\t\t\t\t\t\tsuccess(re) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (re.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t// 打开授权页面\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.openSetting({})\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\tpage {\r\n\t\tbackground-color: #C8C7CC;\r\n\t}\r\n\r\n\t.can {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.botton{\r\n\t\tmargin: 20rpx;\r\n\t}\r\n</style>\n","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./canvas.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./canvas.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1619232414934\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}